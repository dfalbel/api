workflow "Deploy" {
  on = "push"
  resolves = [
    "Build docker image",
    "Auth Google",
  ]
}

action "Build docker image" {
  uses = "actions/docker/cli@76ff57a"
  args = ["build", "-t", "api", "."]
}

action "Auth Google" {
  uses = "actions/gcloud/auth@8ec8bfa"
  env = {
    GCLOUD_AUTH = "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZGVjcnlwdHItMTk2NjAxIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiYjc0NWUyZTdiZmZmNThjYTlmYmU3NWIwOTg2NzRmMGQ2ZDRlMmUwMSIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZBSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS1l3Z2dTaUFnRUFBb0lCQVFEbDFaeGh2a3pDbmxndVxuOVhVVEFLeGgxenBydHA5STRGcGRIVmhVR1pIdUlLb213czZGMHVUNXZKdzd0VVRmb0F4TTBiQTR4TFlCK2hIaVxuWWJ0TUZIVllGMjRkU0J0dklYbWh6SkhVWFlKNnhPdDd3bzlvckd5YythdTI2MTdLemttdXkzYlZyMW1PdzFVY1xuUEI5cXZFeVlqUGg4Wk1EaXY0TnJWdnhueU5CTS9sdHAwMEFZdXBXcThaYXB6TGVuVUR6ZnhCZkNlWU8zSVBZWVxuVHh6VmdIWjNNREZkWENsQnhhY3lRYkVNc1FxTUNLNWdDanJvYWlQRUZHalAzUm9BRGtMM1NjZHdPUG9BMFhJT1xuVmdCUEdDd3lHU2hNOXM3ak50eld1Zmh4bVA0M1ZlRVBnck9ISEI5V2t6clhzZXllaXRJTFF5ZXk4eDhGeUI5VlxudG1ORlh0bmJBZ01CQUFFQ2dnRUFJdzR0eUFyS2tuU3NacDB4dWpCRUdyaEZST0NaOHZlbFVNYUZEbTdILzFZa1xuSGIxZzJyQ01GRHRjYVE4QTdrcnZGVmgyVkhKTWdJaXY2YU9XZWNnMURiYWxLUG95bFFTNkZKK3JMb1VFdmMwRFxuVGVFakZvZ1dHT3RMOFo1ODJ0b1VDd0Vsb3ZvWDR0cVFSTG8yNElUUCtnU21jZks4S05tbEpkNGlxWUhMbzdKdVxuRk40UGdka2hqV2FUQmJEUDBZS1NlMWlGelJpbURpcTNhUm0vb3llVVd1aDhWeklCNVJTWjZSTEZUVVRGK0xpaFxudks0cnRNVTZRbnRwY1B6WDJYV2lmZmMzUk16ODdpL1lRVDd1S3lOWWpNZHhXSElmU1hjdGIwbVR4U0FKNnFXL1xudVQ5L21JSGkrQm15OVFNR25nRUk1RERjNGtFdzFDd2E2c3RnSUZTeUFRS0JnUUQ5eFp5aE53cm4wN1hCQ3ozdFxuZjBRVDlYYy84NTEvQXhweXY5dVFkNmdDU1F5d3FVNzFKV2w4a3VDU29FL0Y2MmZmVGJUbFpwTWVFVEFnVFBGZVxuQkZJanBjOENaVzBsRGdOOHRlZWp0U2MvaUdKMmMyL3JhZ1dwb3FOaUZUWXBseU81VlNvTWFUUTVueVVybUxqMVxucjZIWFVRV2RWQXFXWHdWbHV3bzJVU1Jmd1FLQmdRRG4yakkwd1V4dDJrM0FNOUdLNUJGaWNCMFRmVnNyV3BNZlxueHc3VWRqOGN1LzkyZDZkWmJETTNTRWwvSUdzRStTeEZRVUR3T0YybmtCOFdHYWZMWkppdDB1dlZPamhGd2RGZ1xuKzZQMER2NExmcFlRWjlUQUpFN1ZhQ2RQTXBoVVRRVzh6aU1vTVRxdTNCWXdlRW5uQjB6SkF5SXBSMytvWDRwTlxucU5wbmRKRGdtd0tCZ0dqUS8xSERSMWpiby8yNUkvbjlqK1BpaGorKzRyVjhWYWRCd1hHWlNxYXUvM1BVYW8xc1xueDNZeHdGb3ZwdU5yeVBwOXdSTGpYQzZXRU5lMmtCY3lGNjhycENZc09IbU9vVGdZZGpXeTlDUVVzLzZTelk1aFxudXpjR3V3OGZEY0Q5OFQ1eWc2eWVvM2lOV0MvNm82S3V5VjBDMVJ2WGc0djZjV05FYndKaVgzREJBb0dBY0E3Q1xuYzBMMXFLWjVLNnNmM0t3c1J0Si9DeHRzUkFEcjJORUJ0dWhMeXB5R2RRQ1J6cU9BQVhrYnBLakxjTVRwZzdOdFxuS20xanZvZm1ybXpKNzRENFZoTDZUcjFyMHpOQStrbkZUVUV0d2VwMXB3bzRCb0hGNUZrSm5ycUthendxeUwwc1xudXRGSVZwa2kxRnhmQTUxQW5HcTZTUTg0Z08xa1QvS0xWTE0vRG44Q2dZQkMvdUZjZUZJK3E1RUF0ZGhRbjl5WFxuYW9uM3VzOUl4dGhYSG1Db1dIZjdOa1ZZdFB0K0FIVVVkMXd0VW5xMmZVbDdKdVhIb3psT1N0dlN4Y2dWMWtRZVxuM1N2cXpQZDVQNW54MGdCclNscjh0NHBPRU1FT2x4U3N1dzNqREJ6eHpUTW5HYWFMREFicWFIT21iMFNjK0xHUlxuOFhDbGRmOGYrbjhhYkhLVTA3b1ZQZz09XG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAiZ2l0aHViYWN0aW9uc0BkZWNyeXB0ci0xOTY2MDEuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTExNTg3MTk3NDQ3MzUwOTIzNzc4IiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9naXRodWJhY3Rpb25zJTQwZGVjcnlwdHItMTk2NjAxLmlhbS5nc2VydmljZWFjY291bnQuY29tIgp9Cg=="
  }
}
